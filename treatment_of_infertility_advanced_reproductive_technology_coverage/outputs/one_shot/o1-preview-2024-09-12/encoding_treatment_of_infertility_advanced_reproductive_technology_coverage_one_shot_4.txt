in_network(stanford_health_care).
in_network(menlo_medical_clinic).
in_network(sutter_health_palo_alto_medical_foundation).
in_network(tier_two_in_network).

eligible_planned_service(chemotherapy).
eligible_planned_service(pelvic_radiotherapy).
eligible_planned_service(gonadotoxic_therapy).
eligible_planned_service(orchiectomy).
eligible_planned_service(oophorectomy).
eligible_planned_service(hysterectomy).
eligible_planned_service(orchiectomy_for_treatment_of_disease).
eligible_planned_service(oophorectomy_for_treatment_of_disease).
eligible_planned_service(other_treatment_demonstrated_to_result_in_infertility).

covered(C) :-
  claim.service_type(C, ivf_for_fertility_preservation),
  claim.patient_is_believed_to_be_fertile(C, yes),
  claim.planned_service(C, PlannedService),
  eligible_planned_service(PlannedService),
  claim.will_be_retrieving_eggs_for_use(C, yes),
  claim.patient_has_premature_ovarian_failure(C, no),
  claim.location_service_received(C, Location),
  in_network(Location),
  claim.num_other_covered_art_services(C, N),
  N < 1.

covered(C) :-
  claim.service_type(C, cryopreservation_for_fertility_preservation),
  claim.patient_is_believed_to_be_fertile(C, yes),
  claim.planned_service(C, PlannedService),
  eligible_planned_service(PlannedService),
  claim.will_be_retrieving_eggs_for_use(C, yes),
  claim.patient_has_premature_ovarian_failure(C, no),
  claim.location_service_received(C, Location),
  in_network(Location),
  claim.num_other_covered_art_services(C, N),
  N < 1.

