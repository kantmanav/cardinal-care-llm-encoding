covered(C) :-
    condition1(C).
covered(C) :-
    condition2(C).
covered(C) :-
    condition3(C).

% Condition 1: Female Contraceptive Counseling
condition1(C) :-
    claim.service_type(C, female_contraceptive_counseling),
    claim.type_of_contraceptive_counseling(C, CT),
    (CT = methods;
     CT = management_of_side_effects;
     CT = adherence),
    claim.counseling_setting(C, CS),
    (CS = individual;
     CS = group).

% Condition 2: Female Contraceptive Drugs or Devices and Follow-Up Care
condition2(C) :-
    claim.service_type(C, female_contraceptive_drugs_or_devices_and_follow_up_care),
    claim.type_of_female_contraceptive_method_provided(C, T),
    fda_approved_female_contraceptive_method(T),
    acceptable_mode_of_providing_service(C),
    check_otc(C, T).

acceptable_mode_of_providing_service(C) :-
    claim.mode_of_providing_service(C, MPS),
    (MPS = provided_by;
     MPS = administered_by;
     MPS = removed_by;
     MPS = provided_related_service;
     MPS = provided_related_supplies;
     MPS = provided_follow_up_care).

check_otc(C, T) :-
    otc_female_contraceptive_method(T),
    claim.otc_female_contraceptive_method_is_prescribed_by_provider(C, yes).

check_otc(C, T) :-
    \+ otc_female_contraceptive_method(T).

% Condition 3: Female Voluntary Sterilization
condition3(C) :-
    claim.service_type(C, female_voluntary_sterilization),
    claim.type_of_female_voluntary_sterilization_procedure_service_or_supplies(C, T),
    (T = tubal_ligation;
     T = sterilization_implants;
     T = related_services;
     T = related_supplies).

